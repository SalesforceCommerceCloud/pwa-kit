"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[729],{54997:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var a=s(28407),r=s(77810),o=s(75826),n=s.n(o),i=s(16602),u=s(34692),d=s(36287),l=s(66272),c=s(90031),m=s(7711),p=s(41375),g=s(49785),A=s(64965),_=s(65376),y=s(99786),f=s(34186),h=s(94012),v=s(17015);const E=(0,i.zR)({defaultMessage:[{type:0,value:"Incorrect username or password, please try again."}],id:"login_page.error.incorrect_username_or_password"}),b=()=>{const{formatMessage:e}=(0,u.A)(),t=(0,m.A)(),s=(0,g.mN)(),o=(0,A.zy)(),n=(0,_.A)(),{isRegistered:i,customerType:b}=(0,c.useCustomerType)(),w=(0,c.useAuthHelper)(c.AuthHelpers.LoginRegisteredUserB2C),B=(0,c.useCustomerId)(),C=(0,h.Z)(b),{data:k}=(0,c.useCustomerBaskets)({parameters:{customerId:B}},{enabled:!!B&&!v.S$,keepPreviousData:!0}),D=(0,c.useShopperBasketsMutation)("mergeBasket"),L=function(){var t=(0,a.A)((function*(t){try{var a,r,o;yield w.mutateAsync({username:t.email,password:t.password});(null==k||null===(a=k.baskets)||void 0===a||null===(r=a[0])||void 0===r||null===(o=r.productItems)||void 0===o?void 0:o.length)>0&&"guest"===C&&D.mutate({headers:{"Content-Type":"application/json"},parameters:{createDestinationBasket:!0}})}catch(t){const a=/Unauthorized/i.test(t.message)?e(E):e(f.gS);s.setError("global",{type:"manual",message:a})}}));return function(e){return t.apply(this,arguments)}}();return(0,r.useEffect)((()=>{var e;i&&(null!=o&&null!==(e=o.state)&&void 0!==e&&e.directedFrom?t(o.state.directedFrom):t("/account"))}),[i]),(0,r.useEffect)((()=>{n.sendViewPage(o.pathname)}),[]),r.createElement(d.az,{"data-testid":"login-page",bg:"gray.50",py:[8,16]},r.createElement(p.A,{title:"Sign in",description:"Customer sign in"}),r.createElement(l.m,{paddingTop:16,width:["100%","407px"],bg:"white",paddingBottom:14,marginTop:8,marginBottom:8,borderRadius:"base"},r.createElement(y.A,{form:s,submitForm:L,clickCreateAccount:()=>t("/registration"),clickForgotPassword:()=>t("/reset-password")})))};b.getTemplateName=()=>"login",b.propTypes={match:n().object};const w=b}}]);