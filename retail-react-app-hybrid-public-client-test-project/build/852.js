"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[852,505],{26647:(e,t,r)=>{r.d(t,{A:()=>g});var a=r(64180),o=r(18801),l=r(77810),n=r(17015),i=r(60097),c=r(75011),s=r(25610),u=r(28387),m=r(40133),d=r(60505),p=r(14893),f=r(75826),y=r.n(f),E=r(10575),b=r(34692);const v=["dialogTitle","confirmationMessage","primaryActionLabel","primaryActionAriaLabel","alternateActionLabel","alternateActionAriaLabel","hideAlternateAction","onPrimaryAction","onAlternateAction"],A=e=>{let{dialogTitle:t=E.Gz.dialogTitle,confirmationMessage:r=E.Gz.confirmationMessage,primaryActionLabel:f=E.Gz.primaryActionLabel,primaryActionAriaLabel:y=E.Gz.primaryActionAriaLabel,alternateActionLabel:A=E.Gz.alternateActionLabel,alternateActionAriaLabel:g=E.Gz.alternateActionAriaLabel,hideAlternateAction:h=!1,onPrimaryAction:_=n.lQ,onAlternateAction:S=n.lQ}=e,j=(0,o.A)(e,v);const{formatMessage:C}=(0,b.A)(),x=()=>{S(),j.onClose()};return l.createElement(i.L,(0,a.A)({isOpen:j.isOpen,isCentered:!0,onClose:x},j),l.createElement(c.m,null),l.createElement(i.E,null,l.createElement(s.r,null,C(t)),l.createElement(u.c,null,l.createElement(m.E,null,C(r))),l.createElement(d.j,null,h?null:l.createElement(p.$,{variant:"ghost",mr:3,"aria-label":C(g),onClick:x},C(A)),l.createElement(p.$,{variant:"solid",onClick:()=>{_(),j.onClose()},"aria-label":C(y)},C(f)))))};A.propTypes={isOpen:y().bool.isRequired,onOpen:y().func.isRequired,onClose:y().func.isRequired,dialogTitle:y().object,confirmationMessage:y().object,primaryActionLabel:y().object,primaryActionAriaLabel:y().object,alternateActionLabel:y().object,alternateActionAriaLabel:y().object,onPrimaryAction:y().func,onAlternateAction:y().func,hideAlternateAction:y().bool};const g=A},535:(e,t,r)=>{r.d(t,{A:()=>D});var a=r(18801),o=r(10939),l=r(77810),n=r(75826),i=r.n(n),c=r(41863),s=r(16602),u=r(89408),m=r(66569),d=r(79162),p=r(36287),f=r(87287),y=r(48593),E=r(86400),b=r(75712),v=r(45915),A=r(14893),g=r(38340),h=r(40133),_=r(87916),S=r(69879),j=r(70581),C=r(23132),x=r(82926),I=r(90788),P=r(56344),k=r(26069),z=r(90031),O=r(35490);const w=["removePromoCode"];function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const L=({basket:e})=>{var t,r,a;const o=(null==e||null===(t=e.productItems)||void 0===t?void 0:t.reduce(((e,t)=>e+t.quantity),0))||0,n=(null==e||null===(r=e.productItems)||void 0===r?void 0:r.map((({productId:e})=>e)).join(","))??"",{data:i}=(0,z.useProducts)({parameters:{ids:n,allImages:!0}},{enabled:Boolean(n),select:e=>{var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.reduce(((e,t)=>(e[t.id]=t,e)),{})}});return l.createElement(u.n,{allowToggle:!0,width:"100%"},l.createElement(m.A,{style:{border:0}},l.createElement(d.J,{color:"blue.700"},l.createElement(O.C$,{"aria-hidden":!0}),l.createElement(p.az,{px:2},l.createElement(c.A,{id:"order_summary.cart_items.action.num_of_items_in_cart",defaultMessage:[{type:6,value:"itemCount",options:{"=0":{value:[{type:0,value:"0 items"}]},one:{value:[{type:7},{type:0,value:" item"}]},other:{value:[{type:7},{type:0,value:" items"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" in cart"}],values:{itemCount:o}})),l.createElement(f.Q,null)),l.createElement(y.v,{px:0,py:4},l.createElement(E.B,{spacing:5,align:"flex-start",divider:l.createElement(b.c,null)},null===(a=e.productItems)||void 0===a?void 0:a.map(((t,r)=>{const a=T(T(T({},t),i&&i[t.productId]),{},{price:t.price});return l.createElement(j.A,{key:t.productId,index:r,variant:a},l.createElement(v.s,{width:"full",alignItems:"flex-start"},l.createElement(C.A,{width:"80px",mr:2}),l.createElement(E.B,{width:"full",spacing:1,marginTop:"-3px"},l.createElement(x.A,null),l.createElement(I.A,{includeQuantity:!0}),l.createElement(P.A,{baseDirection:"row",currency:null==e?void 0:e.currency}))))})),l.createElement(A.$,{as:_.A,to:"/cart",variant:"link",width:"full",color:"blue.700"},l.createElement(c.A,{defaultMessage:[{type:0,value:"Edit cart"}],id:"order_summary.cart_items.link.edit_cart"}))))))};L.propTypes={basket:i().object};const B=({basket:e,showPromoCodeForm:t=!1,showCartItems:r=!1,isEstimate:o=!1,fontSize:n="md"})=>{var i,u,m,d,f,y;const _=(0,S.mx)(),{removePromoCode:j}=_,C=(0,a.A)(_,w);if(!(null!=e&&e.basketId||null!=e&&e.orderNo))return null;const x=null===(i=e.shippingItems)||void 0===i?void 0:i[0],I=(null==x||null===(u=x.priceAdjustments)||void 0===u?void 0:u.length)>0;return l.createElement(E.B,{"data-testid":"sf-order-summary",spacing:5},l.createElement(g.D,{fontSize:n,pt:1,id:"order-summary-heading"},l.createElement(c.A,{defaultMessage:[{type:0,value:"Order Summary"}],id:"order_summary.heading.order_summary"})),l.createElement(E.B,{spacing:4,align:"flex-start",role:"region","aria-labelledby":"order-summary-heading"},r&&l.createElement(L,{basket:e}),l.createElement(E.B,{w:"full"},l.createElement(v.s,{justify:"space-between","aria-live":"polite","aria-atomic":"true"},l.createElement(h.E,{fontWeight:"bold",fontSize:n},l.createElement(c.A,{defaultMessage:[{type:0,value:"Subtotal"}],id:"order_summary.label.subtotal"})),l.createElement(h.E,{fontWeight:"bold",fontSize:n},l.createElement(s.Gr,{style:"currency",currency:null==e?void 0:e.currency,value:null==e?void 0:e.productSubTotal}))),null===(m=e.orderPriceAdjustments)||void 0===m?void 0:m.map((t=>l.createElement(v.s,{justify:"space-between",key:t.priceAdjustmentId,"aria-live":"polite","aria-atomic":"true"},l.createElement(h.E,{fontSize:n},t.itemText),l.createElement(h.E,{color:"green.600",fontSize:n},l.createElement(s.Gr,{style:"currency",currency:null==e?void 0:e.currency,value:t.price}))))),l.createElement(v.s,{justify:"space-between","aria-live":"polite","aria-atomic":"true"},l.createElement(v.s,{alignItems:"center"},l.createElement(h.E,{lineHeight:1,fontSize:n},l.createElement(c.A,{defaultMessage:[{type:0,value:"Shipping"}],id:"order_summary.label.shipping"}),I&&l.createElement(h.E,{as:"span",ml:1},"(",l.createElement(c.A,{defaultMessage:[{type:0,value:"Promotion applied"}],id:"order_summary.label.promo_applied"}),")")),I&&l.createElement(k.A,{ml:1},l.createElement(E.B,null,null==x||null===(d=x.priceAdjustments)||void 0===d?void 0:d.map((e=>l.createElement(h.E,{key:e.priceAdjustmentId,fontSize:"sm"},e.itemText)))))),null!=x&&null!==(f=x.priceAdjustments)&&void 0!==f&&f.some((({appliedDiscount:e})=>"free"===(null==e?void 0:e.type)))?l.createElement(h.E,{as:"span",color:"green.700",textTransform:"uppercase",fontSize:n},l.createElement(c.A,{defaultMessage:[{type:0,value:"Free"}],id:"order_summary.label.free"})):l.createElement(h.E,{fontSize:n},l.createElement(s.Gr,{value:e.shippingTotal,style:"currency",currency:e.currency}))),l.createElement(v.s,{justify:"space-between","aria-live":"polite","aria-atomic":"true"},l.createElement(h.E,{fontSize:n},l.createElement(c.A,{defaultMessage:[{type:0,value:"Tax"}],id:"order_summary.label.tax"})),null!=e.taxTotal?l.createElement(h.E,{fontSize:n},l.createElement(s.Gr,{value:e.taxTotal,style:"currency",currency:e.currency})):l.createElement(h.E,{fontSize:n,color:"gray.700"},"TBD"))),t?l.createElement(p.az,{w:"full"},l.createElement(S.rv,C)):l.createElement(b.c,null),l.createElement(E.B,{spacing:4,w:"full"},l.createElement(v.s,{w:"full",justify:"space-between","aria-live":"polite","aria-atomic":"true"},o?l.createElement(h.E,{fontWeight:"bold",fontSize:n},l.createElement(c.A,{defaultMessage:[{type:0,value:"Estimated Total"}],id:"order_summary.label.estimated_total"})):l.createElement(h.E,{fontWeight:"bold",fontSize:n},l.createElement(c.A,{defaultMessage:[{type:0,value:"Order Total"}],id:"order_summary.label.order_total"})),l.createElement(h.E,{fontWeight:"bold",fontSize:n},l.createElement(s.Gr,{style:"currency",currency:null==e?void 0:e.currency,value:(null==e?void 0:e.orderTotal)||(null==e?void 0:e.productTotal)}))),(null===(y=e.couponItems)||void 0===y?void 0:y.length)>0&&l.createElement(E.B,{p:4,border:"1px solid",borderColor:"gray.100",borderRadius:"base",bg:"white"},l.createElement(h.E,{fontWeight:"medium",fontSize:n},l.createElement(c.A,{defaultMessage:[{type:0,value:"Promotions applied"}],id:"order_summary.label.promotions_applied"}),":"),l.createElement(E.B,null,e.couponItems.map((t=>l.createElement(v.s,{key:t.couponItemId,alignItems:"center"},l.createElement(h.E,{flex:"1",fontSize:"sm",color:"gray.800"},t.code),!e.orderNo&&l.createElement(A.$,{variant:"link",size:"sm",colorScheme:"red",onClick:()=>j(t.couponItemId)},l.createElement(c.A,{defaultMessage:[{type:0,value:"Remove"}],id:"order_summary.action.remove_promo"}))))))))))};B.propTypes={basket:i().object,showPromoCodeForm:i().bool,showCartItems:i().bool,isEstimate:i().bool,fontSize:i().oneOf(["xs","sm","md","lg","xl"])};const D=B},69879:(e,t,r)=>{r.d(t,{rv:()=>P,mx:()=>I});var a=r(28407),o=r(77810),l=r(75826),n=r.n(l),i=r(34692),c=r(41863),s=r(66115),u=r(89408),m=r(66569),d=r(79162),p=r(14893),f=r(48593),y=r(36287),E=r(49785),b=r(35490),v=r(64180),A=r(18801),g=r(63560);const h=["form","prefix"],_=e=>{let{form:t,prefix:r=""}=e,a=(0,A.A)(e,h);const l=function({form:{control:e,formState:{errors:t}},prefix:r=""}){const{formatMessage:a}=(0,i.A)();return{code:{name:`${r}code`,label:a({defaultMessage:[{type:0,value:"Promo Code"}],id:"use_promo_code_fields.label.promo_code"}),type:"text",defaultValue:"",rules:{required:a({defaultMessage:[{type:0,value:"Please provide a valid promo code."}],id:"use_promo_code_fields.error.required_promo_code"})},error:t[`${r}code`],control:e}}}({form:t,prefix:r}),n=t.watch("code");return o.createElement(y.az,(0,v.A)({"aria-labelledby":"code-feedback"},a),o.createElement(g.A,(0,v.A)({inputProps:{flex:1,mr:2}},l.code),o.createElement(p.$,{type:"submit",fontSize:"sm",isLoading:t.formState.isSubmitting,disabled:(null==n?void 0:n.length)<3},o.createElement(c.A,{defaultMessage:[{type:0,value:"Apply"}],id:"promo_code_fields.button.apply"}))))};_.propTypes={form:n().object.isRequired,prefix:n().string};const S=_;var j=r(34186),C=r(90031),x=r(84319);const I=()=>{const{formatMessage:e}=(0,i.A)(),{data:t}=(0,x.X)(),r=(0,E.mN)(),o=(0,s.d)(),l=(0,C.useShopperBasketsMutation)("addCouponToBasket"),n=(0,C.useShopperBasketsMutation)("removeCouponFromBasket"),c=function(){var n=(0,a.A)((function*({code:a}){try{yield l.mutateAsync({parameters:{basketId:null==t?void 0:t.basketId},body:{code:a}}),r.reset({code:""}),o({title:e({defaultMessage:[{type:0,value:"Promotion applied"}],id:"use_promocode.info.promo_applied"}),status:"success",position:"top-right",isClosable:!0})}catch(t){r.setError("code",{type:"manual",message:e({defaultMessage:[{type:0,value:"Check the code and try again, it may already be applied or the promo has expired."}],id:"use_promocode.error.check_the_code"})},{shouldFocus:!0})}}));return function(e){return n.apply(this,arguments)}}();return{form:r,submitPromoCode:c,removePromoCode:function(){var r=(0,a.A)((function*(r){n.mutate({parameters:{basketId:null==t?void 0:t.basketId,couponItemId:r}},{onSuccess:()=>{o({title:e({defaultMessage:[{type:0,value:"Promotion removed"}],id:"use_promocode.info.promo_removed"}),status:"success",position:"top-right",isClosable:!0})},onError:()=>{o({title:e(j.gS),status:"error",position:"top-right",isClosable:!0})}})}));return function(e){return r.apply(this,arguments)}}()}},P=({form:e,submitPromoCode:t,itemProps:r})=>{const[a,l]=(0,o.useState)();return(0,o.useEffect)((()=>{e.formState.isSubmitSuccessful&&l(!1)}),[e.formState.isSubmitSuccessful]),o.createElement(u.n,{allowToggle:!0,index:a?0:-1,onChange:()=>l(!a)},o.createElement(m.A,r,(({isExpanded:r})=>o.createElement(o.Fragment,null,o.createElement(d.J,{as:p.$,justifyContent:"flex-start",variant:"link",fontSize:"sm",color:"blue.700",rightIcon:r?o.createElement(b.Mt,null):o.createElement(b.D3,null),onClick:()=>e.reset()},o.createElement(c.A,{defaultMessage:[{type:0,value:"Do you have a promo code?"}],id:"promocode.accordion.button.have_promocode"})),o.createElement(f.v,{px:0,mb:4},o.createElement(y.az,{"data-testid":"promo-code-form",as:"form",p:4,background:"white",border:"1px solid",borderColor:"gray.100",borderRadius:"base",onSubmit:e.handleSubmit(t)},o.createElement(S,{form:e,maxWidth:"350px"})))))))};P.propTypes={form:n().object.isRequired,submitPromoCode:n().func.isRequired,itemProps:n().object}},71878:(e,t,r)=>{r.d(t,{A:()=>f});var a=r(64180),o=r(28407),l=r(77810),n=r(75826),i=r.n(n),c=r(90031),s=r(34186),u=r(26647),m=r(30916),d=r(17015);const p=({productIds:e=[],productItems:t=[],handleUnavailableProducts:r=d.lQ})=>{const n=(0,l.useRef)(null),i=e.length?e:t.map((e=>e.productId));(0,c.useProducts)({parameters:{ids:null==i?void 0:i.join(","),allImages:!0}},{enabled:(null==i?void 0:i.length)>0,onSuccess:e=>{var r;const a=[],o=[];null===(r=e.data)||void 0===r||r.forEach((({id:e,inventory:r})=>{if(a.push(e),t.length){const a=t.find((t=>t.productId===e));null!=a&&a.type||null!=r&&r.orderable&&!(null!=r&&r.orderable&&(null==a?void 0:a.quantity)>r.stockLevel)||o.push(e)}}));const l=i.filter((e=>!a.includes(e)||o.includes(e)));n.current=l}});const p=(0,m.j)();return(0,l.useEffect)((()=>{var e;(null===(e=n.current)||void 0===e?void 0:e.length)>0&&p.onOpen()}),[n.current]),l.createElement(u.A,(0,a.A)({"data-testid":"unavailable-product-modal",closeOnEsc:!1,closeOnOverlayClick:!1},s.F1,{hideAlternateAction:!0,onPrimaryAction:(0,o.A)((function*(){yield r(n.current),n.current=null,p.onClose()})),onAlternateAction:()=>{}},p))};p.propTypes={productItems:i().array,productIds:i().array,handleUnavailableProducts:i().func};const f=p}}]);