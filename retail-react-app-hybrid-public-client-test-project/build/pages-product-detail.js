"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[875],{60138:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var a=r(28407),n=r(10939),o=r(77810),i=r(75826),l=r.n(i),d=r(54752),c=r(34692),s=r(41863),u=r(74941),p=r(14893),m=r(36287),g=r(86400),v=r(90031),f=r(84319),y=r(79060),E=r(7711),h=r(65376),b=r(93080),P=r(62241),_=r(55878),I=r(63157),A=r(89408),O=r(66569),w=r(79162),T=r(87287),S=r(48593);const k=({product:e})=>{const{formatMessage:t}=(0,c.A)();return o.createElement(g.B,{direction:"row",spacing:[0,0,0,16]},o.createElement(A.n,{allowMultiple:!0,maxWidth:"896px",flex:[1,1,1,5]},o.createElement(O.A,null,o.createElement("h2",null,o.createElement(w.J,{height:"64px"},o.createElement(m.az,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Product Detail"}],id:"product_detail.accordion.button.product_detail"})),o.createElement(T.Q,null))),o.createElement(S.v,{mb:6,mt:4},o.createElement("div",{dangerouslySetInnerHTML:{__html:null==e?void 0:e.longDescription}}))),o.createElement(O.A,null,o.createElement("h2",null,o.createElement(w.J,{height:"64px"},o.createElement(m.az,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Size & Fit"}],id:"product_detail.accordion.button.size_fit"})),o.createElement(T.Q,null))),o.createElement(S.v,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"}))),o.createElement(O.A,null,o.createElement("h2",null,o.createElement(w.J,{height:"64px"},o.createElement(m.az,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Reviews"}],id:"product_detail.accordion.button.reviews"})),o.createElement(T.Q,null))),o.createElement(S.v,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"}))),o.createElement(O.A,null,o.createElement("h2",null,o.createElement(w.J,{height:"64px"},o.createElement(m.az,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Questions"}],id:"product_detail.accordion.button.questions"})),o.createElement(T.Q,null))),o.createElement(S.v,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"})))),o.createElement(m.az,{display:["none","none","none","block"],flex:4}))};k.propTypes={product:l().object};const C=k;var D=r(2219),L=r(6834),x=r(34186),M=r(84479),j=r(64965),B=r(34638),z=r(54851);function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const W=()=>{var e,t;const{formatMessage:r}=(0,c.A)(),n=(0,j.W6)(),i=(0,j.zy)(),l=(0,h.A)(),A=(0,b.A)(),O=(0,B.d)(),w=(0,E.A)(),T=(0,v.useCustomerId)(),{isLoading:S}=(0,f.X)(),{addItemToNewOrExistingBasket:k}=(0,v.useShopperBasketsMutationHelper)(),H=(0,v.useShopperBasketsMutation)("updateItemsInBasket"),{res:W}=(0,P.useServerContext)();W&&W.set("Cache-Control",`s-maxage=${x.kB}, stale-while-revalidate=${x.Yw}`);const{productId:q}=(0,j.g)(),N=new URLSearchParams(i.search),{data:F,isLoading:$,isError:Q,error:R}=(0,v.useProduct)({parameters:{id:N.get("pid")||q,perPricebook:!0,expand:["availability","promotions","options","images","prices","variations","set_products","bundled_products"],allImages:!0}},{keepPreviousData:!0}),{data:J,isError:K,error:U}=(0,v.useCategory)({parameters:{id:null==F?void 0:F.primaryCategoryId,levels:1}}),[Y,G]=(0,o.useState)({}),[X,Z]=(0,o.useState)({}),[ee,te]=(0,o.useState)(1),re=o.useRef({}),ae=null==F?void 0:F.type.set,ne=null==F?void 0:F.type.bundle;let oe="";ne&&(oe=null===(e=Object.keys(Y))||void 0===e?void 0:e.map((e=>Y[e].variant.productId)).join(","));const{data:ie}=(0,v.useProducts)({parameters:{ids:oe,allImages:!1,expand:["availability","variations"],select:"(data.(id,inventory,master))"}},{enabled:(null===(t=oe)||void 0===t?void 0:t.length)>0,keepPreviousData:!0});ne&&ie&&F.bundledProducts.forEach((({product:e},t)=>{const r=ie.data.find((t=>t.master.masterId===e.id));r&&(F.bundledProducts[t].product=V(V({},e),{},{inventory:r.inventory}))}));const le=ae||ne?(0,u.hh)(F):{};if(Q){var de;const e=null==R||null===(de=R.response)||void 0===de?void 0:de.status;if(404===e)throw new D.HTTPNotFound("Product Not Found.");throw new D.HTTPError(e,`HTTP Error ${e} occurred.`)}if(K){var ce;const e=null==U||null===(ce=U.response)||void 0===ce?void 0:ce.status;if(404===e)throw new D.HTTPNotFound("Category Not Found.");throw new D.HTTPError(e,`HTTP Error ${e} occurred.`)}const[se,ue]=(0,o.useState)(J),pe=(0,y.rn)(F);(0,o.useEffect)((()=>{J&&ue(J)}),[J]),(0,o.useEffect)((()=>{if(!pe)return;const e=(0,M.tE)(`${i.pathname}${i.search}`,{pid:null==pe?void 0:pe.productId});n.replace(e)}),[pe]);const{data:me,isLoading:ge}=(0,z.T)(),ve=(0,v.useShopperCustomersMutation)("createCustomerProductListItem"),fe=(e,t,a)=>{var n;(null==me||null===(n=me.customerProductListItems)||void 0===n?void 0:n.find((r=>r.productId===(null==t?void 0:t.productId)||r.productId===(null==e?void 0:e.id))))?O({title:r(x.p7),status:"info",action:o.createElement(p.$,{variant:"link",onClick:()=>w("/account/wishlist")},r(x.D$))}):ve.mutate({parameters:{listId:me.id,customerId:T},body:{quantity:a,productId:(null==t?void 0:t.productId)||(null==e?void 0:e.id),public:!1,priority:1,type:"product"}},{onSuccess:()=>{O({title:r(x.FD,{quantity:1}),status:"success",action:o.createElement(p.$,{variant:"link",onClick:()=>w("/account/wishlist")},r(x.D$))})},onError:()=>{Ee()}})},ye=(0,B.d)(),Ee=()=>{ye({title:r(x.gS),status:"error"})},he=function(){var e=(0,a.A)((function*(e){try{const t=e.map((({variant:e,quantity:t})=>({productId:e.productId,price:e.price,quantity:t})));return yield k(t),l.sendAddToCart(t),e}catch(e){console.log("error",e),Ee(e)}}));return function(t){return e.apply(this,arguments)}}(),be=(0,o.useCallback)((()=>{var e;Object.values(re.current).forEach((({validateOrderability:e})=>{e({scrollErrorIntoView:!1})}));const t=Object.keys(Y),r=null===(e=le.childProducts.find((({product:e})=>!t.includes(e.id))))||void 0===e?void 0:e.product;if(r){const{ref:e}=re.current[r.id];return e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"end"}),!1}return!0}),[F,Y]),Pe=function(){var e=(0,a.A)((function*(e,t){try{const e=Object.values(Y),r=[{productId:F.id,price:F.price,quantity:t,bundledProductItems:e.map((e=>({productId:e.variant.productId,quantity:e.quantity})))}],a=yield k(r),n=e.map((e=>e.product.id)),o=a.productItems.find((e=>{var t,r;if(null!==(t=e.bundledProductItems)&&void 0!==t&&t.length)return(null===(r=e.bundledProductItems)||void 0===r?void 0:r.map((e=>e.productId))).every((e=>n.includes(e)))})),i=(0,u.NM)(o,e);return i.length&&(yield H.mutateAsync({method:"PATCH",parameters:{basketId:a.basketId},body:i})),l.sendAddToCart(r),e}catch(e){Ee(e)}}));return function(t,r){return e.apply(this,arguments)}}();return(0,o.useEffect)((()=>{if(F&&F.type.set)l.sendViewProduct(F),F.setProducts.map((e=>{try{l.sendViewProduct(e)}catch(t){L.A.error("Einstein sendViewProduct error",{namespace:"ProductDetail.useEffect",additionalProperties:{error:t,child:e}})}A.sendViewProduct(J,e,"detail")}));else if(F){try{l.sendViewProduct(F)}catch(e){L.A.error("Einstein sendViewProduct error",{namespace:"ProductDetail.useEffect",additionalProperties:{error:e,product:F}})}A.sendViewProduct(J,F,"detail")}}),[F]),o.createElement(m.az,{className:"sf-product-detail-page",layerStyle:"page","data-testid":"product-details-page"},o.createElement(d.Helmet,null,o.createElement("title",null,null==F?void 0:F.pageTitle),o.createElement("meta",{name:"description",content:null==F?void 0:F.pageDescription})),o.createElement(g.B,{spacing:16},ae||ne?o.createElement(o.Fragment,null,o.createElement(I.A,{product:F,category:(null==se?void 0:se.parentCategoryTree)||[],addToCart:ae?()=>{const e=Object.values(Y);return he(e)}:Pe,addToWishlist:fe,isProductLoading:$,isBasketLoading:S,isWishlistLoading:ge,validateOrderability:be,childProductOrderability:X,setSelectedBundleQuantity:te}),o.createElement("hr",null),le.childProducts.map((({product:e,quantity:t})=>o.createElement(m.az,{key:e.id,"data-testid":"child-product"},o.createElement(I.A,{ref:function(t){re.current[e.id]={ref:t,validateOrderability:this.validateOrderability}},product:e,isProductPartOfSet:ae,isProductPartOfBundle:ne,childOfBundleQuantity:t,selectedBundleParentQuantity:ee,addToCart:ae?(t,r)=>he([{product:e,variant:t,quantity:r}]):null,addToWishlist:ae?fe:null,onVariantSelected:(e,r,a)=>{if(a)G((n=>V(V({},n),{},{[e.id]:{product:e,variant:r,quantity:ne?t:a}})));else{const t=V({},Y);delete t[e.id],G(t)}},isProductLoading:$,isBasketLoading:S,isWishlistLoading:ge,setChildProductOrderability:Z}),o.createElement(C,{product:e}),o.createElement(m.az,{display:["none","none","none","block"]},o.createElement("hr",null)))))):o.createElement(o.Fragment,null,o.createElement(I.A,{product:F,category:(null==se?void 0:se.parentCategoryTree)||[],addToCart:(e,t)=>he([{product:F,variant:e,quantity:t}]),addToWishlist:fe,isProductLoading:$,isBasketLoading:S,isWishlistLoading:ge}),o.createElement(C,{product:F})),o.createElement(g.B,{spacing:16},!ae&&o.createElement(_.A,{title:o.createElement(s.A,{defaultMessage:[{type:0,value:"Complete the Set"}],id:"product_detail.recommended_products.title.complete_set"}),recommender:x.tD.PDP_COMPLETE_SET,products:[F],mx:{base:-4,md:-8,lg:0},shouldFetch:()=>null==F?void 0:F.id}),o.createElement(_.A,{title:o.createElement(s.A,{defaultMessage:[{type:0,value:"You might also like"}],id:"product_detail.recommended_products.title.might_also_like"}),recommender:x.tD.PDP_MIGHT_ALSO_LIKE,products:[F],mx:{base:-4,md:-8,lg:0},shouldFetch:()=>null==F?void 0:F.id}),o.createElement(_.A,{key:i.key,title:o.createElement(s.A,{defaultMessage:[{type:0,value:"Recently Viewed"}],id:"product_detail.recommended_products.title.recently_viewed"}),recommender:x.tD.PDP_RECENTLY_VIEWED,mx:{base:-4,md:-8,lg:0}}))))};W.getTemplateName=()=>"product-detail",W.propTypes={match:l().object};const q=W}}]);